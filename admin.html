<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Admin Control Panel - Emery Campbell Consulting</title>

<link href="https://fonts.googleapis.com/css2?family=Cormorant+Garamond:wght@600&family=Montserrat:wght@300;400;500;600&display=swap" rel="stylesheet">

<style>
*{
margin:0;
padding:0;
box-sizing:border-box;
}

body{
font-family:'Montserrat',sans-serif;
background:#0f0f0f;
color:#fff;
padding:40px;
min-height:100vh;
}

/* HEADER */
.header{
display:flex;
justify-content:space-between;
align-items:center;
margin-bottom:40px;
}

.header h1{
font-family:'Cormorant Garamond',serif;
letter-spacing:2px;
}

button{
padding:8px 18px;
border:none;
border-radius:6px;
cursor:pointer;
background:#C19A6B;
color:#fff;
font-weight:500;
}

/* TABLE */
.table-container{
background:#1a1a1a;
padding:25px;
border-radius:12px;
border:1px solid rgba(193,154,107,0.2);
overflow-x:auto;
}

table{
width:100%;
border-collapse:collapse;
font-size:0.85rem;
}

th, td{
padding:12px;
text-align:left;
border-bottom:1px solid #333;
}

th{
background:#111;
font-weight:600;
}

tr:hover{
background:#151515;
}

/* EMPTY STATE */
.empty{
opacity:0.6;
text-align:center;
padding:20px;
}
</style>
</head>

<body>

<div class="header">
<h1>ADMIN DASHBOARD</h1>
<button onclick="logout()">Logout</button>
</div>

<div class="table-container">
<table>
<thead>
<tr>
<th>Email</th>
<th>Service</th>
<th>Package</th>
<th>Template</th>
<th>Phase</th>
<th>Progress</th>
<th>Payment</th>
</tr>
</thead>
<tbody id="clientTable"></tbody>
</table>
</div>

<script>
/* ðŸ” ADMIN SECURITY CHECK */
const currentUser = JSON.parse(localStorage.getItem("currentUser"));

if(!currentUser || currentUser.role !== "admin"){
window.location.href = "login.html";
}

/* LOAD USERS */
let users = JSON.parse(localStorage.getItem("users")) || [];
const table = document.getElementById("clientTable");

let clientCount = 0;

users.forEach(user => {

if(user.role === "admin") return;

clientCount++;

table.innerHTML += `
<tr>
<td>${user.email}</td>
<td>${user.service || localStorage.getItem("selectedService") || "Not Selected"}</td>
<td>${user.chosenPackage || "Not Selected"}</td>
<td>${user.chosenTemplate || "N/A"}</td>
<td>${user.phase || "Planning"}</td>
<td>${user.progress ? user.progress + "%" : "0%"}</td>
<td>${user.payment || "Unpaid"}</td>
</tr>
`;

});

/* EMPTY STATE */
if(clientCount === 0){
table.innerHTML = `
<tr>
<td colspan="7" class="empty">
No clients registered yet.
</td>
</tr>
`;
}

function logout(){
localStorage.removeItem("currentUser");
window.location.href="index.html";
}
</script>

</body>
</html>
