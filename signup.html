<script>
document.getElementById("signupForm").addEventListener("submit", function(e){
    e.preventDefault();

    const name = document.getElementById("signupName").value.trim();
    const email = document.getElementById("signupEmail").value.trim().toLowerCase();
    const password = document.getElementById("signupPassword").value;
    const confirm = document.getElementById("signupConfirm").value;

    if(password !== confirm){
        alert("Passwords do not match.");
        return;
    }

    let users = JSON.parse(localStorage.getItem("users")) || [];

    // Check if user already exists
    if(users.find(u => u.email === email)){
        alert("Account already exists.");
        return;
    }

    const newUser = {
        name: name,
        email: email,
        role: email === "admin@emery.com" ? "admin" : "client",
        signupDate: new Date().toISOString()
    };

    users.push(newUser);

    localStorage.setItem("users", JSON.stringify(users));
    localStorage.setItem("currentUser", email);

    if(newUser.role === "admin"){
        window.location.href = "admin.html";
    } else {
        window.location.href = "account.html";
    }
});
</script>
